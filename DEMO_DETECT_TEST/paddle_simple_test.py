#!/usr/bin/env python3\n# -*- coding: utf-8 -*-\n\"\"\"\nPaddleOCR ç®€åŒ–æµ‹è¯•\n\"\"\"\n\nimport os\nfrom paddleocr import PaddleOCR\n\ndef simple_test():\n    \"\"\"ç®€åŒ–çš„PaddleOCRæµ‹è¯•\"\"\"\n    \n    print(\"ğŸš€ å¼€å§‹PaddleOCRç®€åŒ–æµ‹è¯•\")\n    print(\"=\" * 50)\n    \n    # åˆå§‹åŒ–PaddleOCR\n    ocr = PaddleOCR(\n        use_textline_orientation=True,\n        lang='en'\n    )\n    print(\"âœ… PaddleOCRåˆå§‹åŒ–æˆåŠŸ\")\n    \n    # æµ‹è¯•å‡ å¼ å›¾ç‰‡\n    test_images = [\n        \"DEMO_DETECT_TEST/yolo_arrow_test_results/2_target_1_original.jpg\",\n        \"DEMO_DETECT_TEST/yolo_arrow_test_results/1_target_1_original.jpg\",\n        \"DEMO_DETECT_TEST/yolo_arrow_test_results/3_target_1_original.jpg\"\n    ]\n    \n    for image_path in test_images:\n        if not os.path.exists(image_path):\n            print(f\"âŒ å›¾ç‰‡ä¸å­˜åœ¨: {image_path}\")\n            continue\n            \n        print(f\"\\nğŸ“¸ æµ‹è¯•å›¾ç‰‡: {os.path.basename(image_path)}\")\n        \n        try:\n            # ä½¿ç”¨PaddleOCRè¯†åˆ«\n            results = ocr.predict(image_path)\n            \n            # è§£æè¯†åˆ«ç»“æœ\n            def parse_ocr_results(results):\n                parsed = []\n                if results and len(results) > 0:\n                    ocr_result = results[0]\n                    if 'rec_texts' in ocr_result and ocr_result['rec_texts']:\n                        texts = ocr_result['rec_texts']\n                        scores = ocr_result.get('rec_scores', [])\n                        polys = ocr_result.get('rec_polys', [])\n                        \n                        for i in range(len(texts)):\n                            text = texts[i] if i < len(texts) else \"\"\n                            score = scores[i] if i < len(scores) else 0.0\n                            poly = polys[i] if i < len(polys) else []\n                            \n                            parsed.append({\n                                'bbox': poly.tolist() if hasattr(poly, 'tolist') else poly,\n                                'text': text,\n                                'confidence': score\n                            })\n                return parsed\n            \n            parsed_results = parse_ocr_results(results)\n            print(f\"ğŸ” è§£æç»“æœ: {len(parsed_results)} ä¸ª\")\n            \n            # ç­›é€‰æ•°å­—ç»“æœ\n            digit_results = []\n            for item in parsed_results:\n                text = item['text'].strip()\n                if any(c.isdigit() for c in text):\n                    digits = ''.join(c for c in text if c.isdigit())\n                    if len(digits) >= 1:\n                        item['digits'] = digits\n                        digit_results.append(item)\n            \n            if digit_results:\n                print(f\"âœ… æ‰¾åˆ°æ•°å­—: {len(digit_results)} ä¸ª\")\n                for i, item in enumerate(digit_results):\n                    print(f\"  {i+1}. æ–‡æœ¬: '{item['text']}' -> æ•°å­—: '{item['digits']}' (ç½®ä¿¡åº¦: {item['confidence']:.3f})\")\n            else:\n                print(\"âŒ æœªæ‰¾åˆ°æ•°å­—\")\n                if parsed_results:\n                    print(f\"  ä½†è¯†åˆ«åˆ°äº†: {[item['text'] for item in parsed_results]}\")\n                \n        except Exception as e:\n            print(f\"âŒ è¯†åˆ«å¤±è´¥: {e}\")\n            import traceback\n            traceback.print_exc()\n    \n    print(\"\\n\" + \"=\" * 50)\n    print(\"ğŸ” ç®€åŒ–æµ‹è¯•å®Œæˆ\")\n\nif __name__ == \"__main__\":\n    simple_test() 